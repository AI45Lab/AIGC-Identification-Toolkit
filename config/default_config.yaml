# 统一水印工具默认配置

# 文本水印配置
text_watermark:
  algorithm: "postmark"  # 使用 PostMark 后处理水印算法


  postmark:
    embedder: "nomic"                        # 嵌入模型: "nomic" (推荐本地部署)
    inserter: "mistral-7b-inst"              # 插入LLM: "mistral-7b-inst"
    ratio: 0.12                              # 水印词比例 (0.12 = 12%)
    iterate: "v2"                            # 迭代插入版本: "v2" (推荐)
    threshold: 0.7                           # 检测相似度阈值
    device: "auto"                           # 设备: "auto", "cuda", "cpu"
    inserter_temperature: 0.01               # 插入LLM采样温度(>0)

    # AI文本生成配置
    llm_for_generation: "mistral-7b-inst"    # 用于生成原始文本的LLM
    max_tokens: 600                          # 最大生成token数
    generation_temperature: 0.7              # 生成采样温度
    generation_top_p: 0.9                    # Nucleus sampling参数
    generation_top_k: 50                     # Top-k sampling参数

    cache_dir: null  # 默认使用 $HF_HOME 或 ~/.cache/huggingface

# 图像水印配置  
image_watermark:
  algorithm: "videoseal"  # 默认使用VideoSeal算法
  model_name: "stabilityai/stable-diffusion-2-1-base"
  resolution: 512
  num_inference_steps: 30
  guidance_scale: 7.5
  watermark_key: "default"
  keys_dir: "keys"
  device: null  
  lowres_attenuation: true
  
  videoseal:
    replicate: 16  
    chunk_size: 16  

# 音频水印配置
audio_watermark:
  algorithm: "audioseal"  # 默认使用AudioSeal算法
  model_name: "audioseal_wm_16bits"
  detector_name: "audioseal_detector_16bits"
  sample_rate: 16000  
  message_bits: 16  
  device: null 
  watermark_strength: 1.0  
  detection_threshold: 0.5  
  message_threshold: 0.5  
  
  bark:
    model_size: "large"  
    use_gpu: true  
    temperature: 0.8  
    default_voice: "v2/en_speaker_6"  
    silence_duration: 0.25  
    
  audioseal:
    nbits: 16  
    alpha: 1.0  
    cache_dir: "~/.cache/audioseal"  

# 视频水印配置
video_watermark:
  generator: "wan"  
  watermark: "videoseal"  
  cache_dir: "~/.cache/huggingface"  
  device: null 

  wan:
    model_name: "Wan-AI/Wan2.1-T2V-1.3B-Diffusers"  
    num_frames: 81  
    # 重要：高度与宽度需能被16整除
    height: 480  
    width: 832   
    num_inference_steps: 50  
    guidance_scale: 5.0  
    vram_requirement: "8GB"  


  videoseal:
    lowres_attenuation: true  
    chunk_size: 16  

# 输出配置
output:
  text_output_dir: "outputs/text"
  image_output_dir: "outputs/images"
  audio_output_dir: "outputs/audio"
  video_output_dir: "outputs/videos"  
  log_level: "INFO"
  save_intermediate: false

# 评估配置
evaluation:
  metrics: ["psnr", "ssim", "lpips"]  # 图像质量评估
  text_metrics: ["perplexity", "bleu"]  # 文本质量评估
  audio_metrics: ["snr", "mse", "correlation"]  # 音频质量评估
  video_metrics: ["psnr", "ssim", "frame_consistency"]  # 视频质量评估 